<div class="modal-header">
	<span class="modal-title">创建密钥</span> 
	<span class="eayunfont ef-close ey-font-huge" style="cursor: pointer;" data-ng-click="close()"></span>
</div>
<div class="model-body" style="width: 650px;">
	<form class="form-horizontal ey-form" name="myForm" novalidate>

        <div class="ey-form-group has-feedback">
            <label class="col-sm-3 ey-form-label">创建方式：</label>
	        <div class="col-sm-8 ey-form-radio">
	            <input type="radio" id="radio1" data-ng-model="local" data-ng-checked="true" value="pre"/><label for="radio1">创建新密钥</label>
	            <input type="radio" id="radio2" data-ng-model="local" value="rear"/><label for="radio2">使用已有公钥</label>
	        </div>
        </div>
		<div class="ey-form-group has-feedback"
			data-ng-class="(myForm.name.$dirty && myForm.name.$invalid) ? 'ey-has-error' : ''">
			<label class="col-sm-3 ey-form-label ey-required">密钥名称：</label>
			<div class="col-sm-8">
				<input type="text" class="ey-form-input ey-form-w7" name="name"
					data-ng-model="secretkey.name" placeholder="请输入密钥名称" maxlength="20"
					required ajax-valid="checkName(value)"> 
				<span class="ey-text-tip" data-ng-show="(!myForm.name.$dirty || !myForm.name.$error.required) && !nameflag && !myForm.name.$error.ajaxValid">只支持英文大小写,数字和下划线</span>
				<span class="ey-color-red" data-ng-show="myForm.name.$dirty && myForm.name.$error.required && !nameflag">只支持英文大小写,数字和下划线</span>
				<span class="ey-color-red" data-ng-show="myForm.name.$dirty && myForm.name.$error.ajaxValid && !nameflag">密钥名称已存在</span>
				<span class="ey-color-red" data-ng-show="nameflag">只支持英文大小写,数字和下划线</span>
			</div>
		</div>

		<!-- 公钥 -->
		<div data-ng-show="true" data-ng-if="local=='pre'">{{secretkey.publicKey=""}}</div>
		<div class="ey-form-group has-feedback" data-ng-if="local=='rear'" data-ng-class="(myForm.publickey.$dirty && myForm.publickey.$invalid) ? 'ey-has-error' : ''">
			<label class="col-sm-3 ey-form-label ey-required">输入公钥：</label>
			<div class="col-sm-8">
				<textarea class="ey-form-textarea ey-form-w7" name="publickey" rows="3"
					data-ng-model="secretkey.publicKey" placeholder="格式：ssh-rsa AAAKedvs..."
					maxlength="1000" required> </textarea>
				<span class="ey-color-red" data-ng-show="myForm.publickey.$dirty && myForm.publickey.$error.required">请输入公钥</span>
			</div>
		</div>

		<!-- 按钮区域 -->
		<div class="ey-modal-footer">
			<div class="ey-btn-group">
				<button type="button" class="ey-btn ey-btn-primary btn-modal" data-ng-click="commit()" ng-disabled="!myForm.$valid">确定</button>
				<button type="button" class="ey-btn ey-btn-default btn-modal" data-ng-click="close()">取 消</button>
			</div>
		</div>
	</form>
</div>